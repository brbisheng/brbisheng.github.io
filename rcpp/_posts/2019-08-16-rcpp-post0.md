---
markdown: kramdown
title: Pass-by-value vs. pass-by-reference
categories: ["rcpp", "cpp"]
---

<link rel="stylesheet" type="text/css" href="/css/sidecpp.css">


<p> There is a great example on Pass-by-value vs. pass-by-reference from Stroustrup (2014). </p>


{% highlight c++ linenos %}

int g = 1;
void somefunc(int a, int& b, const int& c) {

  ++a;           // change the object a by 1 locally                 
  ++b;           // increase by 1 the object referred to by b 
  int d = c;     // read the object referred to by c, assign its value to d
                 // why do is a const prefix necessary? in case we made mistakes by modifing the reference! 
                 // because a change of reference will also change the referred! (P196, Stroustrup)
  
  ++g;           // the value of g will be increased by 1, since it is a global variance and not passed by function parameter.

}

int main() {

  int x = 0;
  int y = 0;
  int z = 0;
  somefunc(x,y,z); // result: x==0; y==1; z==0;
                   // The value of the object x is not increased, BECAUSE A COPY of x IS PASSED TO ARGUMENT a.
  somefunc(1,2,3); // error: the second argument is a pass-by-reference, and it needs a variable to refer to
  somefunc(1,y,3); // OK: since c is const, we can pass a literal.

}
{% endhighlight %}

<p style='color:red'> Recall that ... In computer science, an object is a value in memory referenced by an identifier. It can be a variable, a data structure, a function, or a method, and as such. </p>

1. Why does `somefunc(x,y,z)` work?
    - `x,y,z` are all objects which can hold a value.

2. Why does `somefunc(1,2,3)` fail? 
    - **The integer 2 is just a value** (or more precisely an rvalue), **rather than an object holding a value.** 
    - The second argument of `somefunc(.,.,.)` should be an **lvalue**, that is, **something that could appear on the left-hand side of an assignment.**
    - a const reference (the third argument of `somefunc`) does not need an **lvalue**. **It can perform conversions exactly as initialization or pass-by-value.**

So, if we want to change the value of an object passed by reference, you have to pass an object. 

3. In that last call, `somefunc(1,y,3)`, the compiler initializes an `int` for the third argument `c` to refer to.

**So, when our objective is simply to avoid copying, we pass by `const` reference.**

References:
1. Programming: Principles and Practice Using C++, Bjarne Stroustrup.
2. https://stackoverflow.com/questions/1215881/the-difference-between-classes-objects-and-instances
<p style = 'color:red'>// A class is a blueprint which we use to create objects. (class --> objects) </p>
<p style = 'color:red'>// An object is an instance of a class - it's a concrete 'thing' that you made using a specific class. So, 'object' and 'instance' are the same thing, but the word 'instance' indicates the relationship of an object to its class. (object == instance of a class)</p>
