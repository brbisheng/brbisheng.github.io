--- 
layout: post 
title: Mccall (1970) Job Search Model Simulation
comments: true 
---

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>'JobSearchModel'</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style>
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="cell code" data-execution_count="1">
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> scipy.integrate <span class="im">as</span> integrate</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="op">%</span>matplotlib inline</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># By Sheng BI</span></span></code></pre></div>
</div>
<div class="cell markdown">
<h3 id="the-mccall-model">The McCall Model</h3>
<p>Consider an unemployed worker, infinitely lived. At each time <span class="math inline">\(t\)</span>, she receives a job offer <span class="math inline">\(w_{t}\)</span>.</p>
<p>The job offer is drawn from an <span class="math inline">\(i.i.d.\)</span> distribution with respect to <span class="math inline">\(t\)</span>. Let <span class="math inline">\(F(w_{t})\)</span> denote the probability that wage <span class="math inline">\(w_{t}\)</span> is offered.</p>
<p>Upon receiving <span class="math inline">\(w_{t}\)</span>, her decision is :</p>
<ul>
<li>Accept <span class="math inline">\(w_{t}\)</span>, and work permanently at this wage</li>
<li>Reject <span class="math inline">\(w_{t}\)</span>, eat the unemployment benefit <span class="math inline">\(b\)</span>, wait until the next wage offer comes</li>
</ul>
<p>Thus she is in either one of the two states: employed or unemployed</p>
<p>An unemployed maximizes her lifetime expected utility - the discounted sum of consumption <span class="math inline">\(c_{t}\)</span>. In this simplified model, our worker can not save to transfer assets intertemporally, so her consumption is equal to her income <span class="math inline">\(c_{t} = y_{t}\)</span> .</p>
<p>\begin{eqnarray<em>} \Sigma_{t=0}^{\infty} E[\beta\times y_{t}] \tag{1} \end{eqnarray</em>}</p>
<p>where</p>
<p><span class="math display">\[y_{t}=\begin{cases}
w &amp; \text{if accept}\\
b &amp; \text{if reject}
\end{cases} 
\]</span> Parameters:</p>
<ul>
<li><span class="math inline">\(w_{t}\)</span> the wage, for <span class="math inline">\(t = 1, 2, 3, ...\)</span></li>
<li><span class="math inline">\(\beta \in (0,1)\)</span> the discount factor
<ul>
<li>The greater the value, the more patient is the worker, or she is more willing to wait until a better offer comes.</li>
</ul></li>
<li><span class="math inline">\(y_{t}\)</span> the income
<ul>
<li><span class="math inline">\(Y_{t} = w_{t}\)</span> when employed</li>
<li><span class="math inline">\(Y_{t} = b\)</span> when unemployment</li>
</ul></li>
</ul>
</div>
<div class="cell code" data-execution_count="2">
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">## Sampling wages from normal distribution.</span></span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>w_min, w_max <span class="op">=</span> <span class="dv">0</span>, <span class="dv">200</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>w_vals <span class="op">=</span> np.linspace(w_min, w_max, (w_max<span class="op">-</span>w_min))</span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a>w_mean, w_std <span class="op">=</span> <span class="dv">100</span>, <span class="dv">20</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>wpdf_vals <span class="op">=</span> norm.pdf(w_vals, loc <span class="op">=</span> w_mean, scale <span class="op">=</span> w_std)</span>
<span id="cb2-8"><a href="#cb2-8"></a></span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a>my_benefit <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>my_beta <span class="op">=</span> <span class="fl">0.99</span></span>
<span id="cb2-12"><a href="#cb2-12"></a></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="kw">class</span> MccallModel():</span>
<span id="cb2-14"><a href="#cb2-14"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, b <span class="op">=</span> my_benefit,<span class="op">\</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>                beta <span class="op">=</span> my_beta,<span class="op">\</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>                wage_vals <span class="op">=</span> w_vals,<span class="op">\</span></span>
<span id="cb2-17"><a href="#cb2-17"></a>                wpdf_vals <span class="op">=</span> wpdf_vals):</span>
<span id="cb2-18"><a href="#cb2-18"></a>        <span class="co">&#39;&#39;&#39;</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">        Publicly accessible and modifiable class attributes. </span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">        &#39;&#39;&#39;</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>        <span class="va">self</span>.compensation <span class="op">=</span> b </span>
<span id="cb2-22"><a href="#cb2-22"></a>        <span class="va">self</span>.beta <span class="op">=</span> beta</span>
<span id="cb2-23"><a href="#cb2-23"></a>        <span class="va">self</span>.wVals <span class="op">=</span> wage_vals</span>
<span id="cb2-24"><a href="#cb2-24"></a>        <span class="va">self</span>.wpdfVals <span class="op">=</span> wpdf_vals</span>
<span id="cb2-25"><a href="#cb2-25"></a></span>
<span id="cb2-26"><a href="#cb2-26"></a>        <span class="cf">return</span></span>
<span id="cb2-27"><a href="#cb2-27"></a></span>
<span id="cb2-28"><a href="#cb2-28"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="fl">7.5</span>))</span>
<span id="cb2-29"><a href="#cb2-29"></a>ax.stem(w_vals, wpdf_vals, linefmt <span class="op">=</span> <span class="st">&#39;&#39;</span>)</span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="co"># ax.set_xlim(w_min,w_max)</span></span>
<span id="cb2-31"><a href="#cb2-31"></a>ax.set_xlim(<span class="dv">50</span>,<span class="dv">150</span>)</span>
<span id="cb2-32"><a href="#cb2-32"></a>ax.set_xlabel(<span class="st">&#39;Wage draw&#39;</span>)</span>
<span id="cb2-33"><a href="#cb2-33"></a>ax.set_ylabel(<span class="st">&#39;Probability density&#39;</span>)</span>
<span id="cb2-34"><a href="#cb2-34"></a></span>
<span id="cb2-35"><a href="#cb2-35"></a>plt.show()</span>
<span id="cb2-36"><a href="#cb2-36"></a></span>
<span id="cb2-37"><a href="#cb2-37"></a><span class="co"># ref: https://stackoverflow.com/questions/7406943/python-immutable-private-class-variables</span></span></code></pre></div>
<div class="output display_data">
<p><img src="0ddd81dec501d8c83c9adedede00a420ac350e29.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>We are interested in the case where the worker makes optimal decisions.</p>
<p>By convention, let <span class="math inline">\(\sigma\)</span> be the worker's decision on whether or not to accept the wage offer <span class="math inline">\(w\)</span>.An optimal policy is a function from state to decision.</p>
<p><span class="math display">\[\sigma(w)=\begin{cases}
\frac{w}{1-\beta} &amp; \text{if accept}\\
b + \beta \int_{0}^{B}V_{\sigma}(w&#39;)dF(w&#39;) &amp; \text{if reject}
\end{cases} 
\]</span></p>
<p>Here, <span class="math inline">\(V_{\sigma}(w)\)</span> denotes the expected lifetime utility value of a worker who enters into the current period unemployed and receives a wage offer <span class="math inline">\(w\)</span>.</p>
<p>More importantly, let <span class="math inline">\(V_{\sigma}(w)\)</span> be the value when the worker makes optimal decisions <em>at the current period and at all future time points</em>.</p>
<p>Bellman's equation for the unemployed:</p>
<p>\begin{eqnarray<em>} V_{\sigma}(w) = max(\frac{w}{1-\beta}, b + \beta E[V_{\sigma}(w')]) \end{eqnarray</em>}</p>
<center>or</center>
<p>\begin{eqnarray<em>} V_{\sigma}(w) = max(\frac{w}{1-\beta}, b + \beta \int_{0}^{B}V_{\sigma}(w')dF(w')) \end{eqnarray</em>}</p>
<p>where <span class="math inline">\(B\)</span> is the upperbound for <span class="math inline">\(w_{t}\)</span></p>
</div>
<div class="cell markdown">
<h3 id="economic-trade-off-in-mccalls-model">Economic Trade Off in Mccall's model</h3>
<p>Worker's tradeoff: accept the job offer early, or wait until a better offer to come in the future.</p>
<ul>
<li>Waiting too long for a good offer is costly, since the future is discounted</li>
<li>Accepting too early is costly, since better offers might arrive in the future</li>
</ul>
</div>
<div class="cell markdown">
<p>Existence of optimal policies follows from Contraction Mapping Theorem.</p>
<p>Optimal policy: accept when <span class="math inline">\(w = \bar{w}\)</span></p>
<ul>
<li>wage offers above <span class="math inline">\(\bar{w}\)</span> will be accepted, otherwise turned down.</li>
<li>this is a reservation wage strategy.</li>
</ul>
<p>Reservation wage is given by \begin{eqnarray<em>} \frac{\bar{w}}{1-\beta} = \bar{V_\sigma} = b + \beta \int_{0}^{B}V_\sigma(w')dF(w') \end{eqnarray</em>}</p>
<p>So that <span class="math inline">\(\bar{V_\sigma}\)</span> must be a function of <span class="math inline">\(\bar{w}\)</span>, which is determined by other parameters in the model.</p>
<p>for all <span class="math inline">\(w &lt; \bar{w}\)</span>,</p>
<p><span class="math display">\[
\begin{eqnarray}
V_\sigma(w) &amp; = &amp; b + \beta \int_{0}^{B}V_\sigma(w&#39;)dF(w&#39;) \\
 &amp; = &amp; \frac{\bar{w}}{1-\beta}
\end{eqnarray}
\]</span></p>
<p>for all <span class="math inline">\(w &gt; \bar{w}\)</span>,</p>
<p><span class="math display">\[
\begin{eqnarray}
V_\sigma(w) = \frac{w}{1-\beta}
\end{eqnarray}
\]</span></p>
<p>So that we obtain: \begin{eqnarray<em>} \frac{\bar{w}}{1-\beta} = b + \beta \int_{0}^{\bar{w}}\frac{\bar{w}}{1-\beta}dF(w') + \beta \int_{\bar{w}}^{B}\frac{w'}{1-\beta}dF(w') \tag{2} \end{eqnarray</em>}</p>
<p>Since \begin{eqnarray<em>} 1 = \int_{0}^{B}dF(w') = \int_{0}^{\bar{w}}dF(w') + \int_{\bar{w}}^{B}dF(w') \end{eqnarray</em>}</p>
<p>we can rearrange <span class="math inline">\((2)\)</span> to obtain \begin{eqnarray<em>} \bar{w}\int_{0}^{\bar{w}}dF(w') - b = \frac{1}{1-\beta} \int_{\bar{w}}^{B}(\beta w' - \bar{w})dF(w') \tag{3} \end{eqnarray</em>}</p>
<p>Adding both sides of the following equation to <span class="math inline">\((3)\)</span> \begin{eqnarray<em>} \bar{w}\int_{\bar{w}}^{B}dF(w') = \frac{(1-\beta)\bar{w}}{1-\beta} \int_{\bar{w}}^{B}dF(w') \end{eqnarray</em>}</p>
<p>we rearrange, we obtain:</p>
<p>\begin{eqnarray<em>} \bar{w} - b = \frac{\beta}{1-\beta} \int_{\bar{w}}^{B}(w' - \bar{w})dF(w') \tag{4} \end{eqnarray</em>}</p>
<ul>
<li>Now the left hand side <span class="math inline">\(\bar{w} - b\)</span> is the cost of turning down a wage off <span class="math inline">\(\bar{w}\)</span> to continue searching</li>
<li>The right hand side <span class="math inline">\(\frac{\beta}{1-\beta} \int_{\bar{w}}^{B}(w&#39; - \bar{w})dF(w&#39;)\)</span> represents the expected discounted benefit of turning dow a wage offer <span class="math inline">\(\bar{w}\)</span> to continue searching.</li>
</ul>
<p><strong>The following code confirms that there exists a solution for <span class="math inline">\(\bar{w}\)</span>. And this reservation wage is greater than the discounted sum of unemployment benefit. This is because anticipation of future employment possibility brings utility.</strong></p>
</div>
<div class="cell code" data-execution_count="3">
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">## https://matplotlib.org/users/pyplot_tutorial.html </span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">def</span> lhs(rvw, slope <span class="op">=</span> <span class="dv">1</span>, intercept <span class="op">=</span> <span class="op">-</span> my_benefit):</span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="cf">return</span> slope <span class="op">*</span> rvw <span class="op">+</span> intercept</span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="kw">def</span> integrand_continuous(x, rvw):</span>
<span id="cb3-7"><a href="#cb3-7"></a>    result <span class="op">=</span> (x<span class="op">-</span>rvw) <span class="op">*</span> norm.pdf(x, loc <span class="op">=</span> w_mean, scale <span class="op">=</span> w_std)</span>
<span id="cb3-8"><a href="#cb3-8"></a>    <span class="cf">return</span> result</span>
<span id="cb3-9"><a href="#cb3-9"></a></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="kw">def</span> integrand_discrete(rvw, x, std <span class="op">=</span> w_std):</span>
<span id="cb3-11"><a href="#cb3-11"></a>    result <span class="op">=</span> np.where(x<span class="op">&gt;=</span>rvw, (x<span class="op">-</span>rvw) <span class="op">*</span> norm.pdf(x, loc <span class="op">=</span> w_mean, scale <span class="op">=</span> std), <span class="dv">0</span>)</span>
<span id="cb3-12"><a href="#cb3-12"></a>    <span class="co"># result = np.where(x&gt;=rvw, (x-rvw) * F_vals,0)</span></span>
<span id="cb3-13"><a href="#cb3-13"></a>    <span class="cf">return</span> result</span>
<span id="cb3-14"><a href="#cb3-14"></a></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="kw">def</span> rhs(rvw, beta <span class="op">=</span> my_beta, B<span class="op">=</span> <span class="dv">2000</span>, continuous <span class="op">=</span> <span class="va">True</span>, std <span class="op">=</span> w_std):</span>
<span id="cb3-16"><a href="#cb3-16"></a>    <span class="co">&#39;&#39;&#39;</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">    In python, integration can not be vectorized.</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">    &#39;&#39;&#39;</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>    result <span class="op">=</span> []</span>
<span id="cb3-20"><a href="#cb3-20"></a>    <span class="cf">if</span> continuous:</span>
<span id="cb3-21"><a href="#cb3-21"></a>        <span class="cf">for</span> w <span class="kw">in</span> rvw:</span>
<span id="cb3-22"><a href="#cb3-22"></a>            result.append(integrate.quad(integrand_continuous, <span class="op">\</span></span>
<span id="cb3-23"><a href="#cb3-23"></a>                                         w, B, args <span class="op">=</span> (w))[<span class="dv">0</span>])</span>
<span id="cb3-24"><a href="#cb3-24"></a>        result <span class="op">=</span> (beta<span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>beta)) <span class="op">*</span> np.array(result)  </span>
<span id="cb3-25"><a href="#cb3-25"></a>    <span class="cf">if</span> <span class="kw">not</span> continuous:</span>
<span id="cb3-26"><a href="#cb3-26"></a>        result <span class="op">=</span> <span class="bu">map</span>(<span class="kw">lambda</span> w: (my_beta<span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>my_beta)) <span class="op">*</span> <span class="op">\</span></span>
<span id="cb3-27"><a href="#cb3-27"></a>                     np.<span class="bu">sum</span>(integrand_discrete(w, x <span class="op">=</span> w_vals, std <span class="op">=</span> std)), steps)</span>
<span id="cb3-28"><a href="#cb3-28"></a>        <span class="co"># result = [np.sum(integrand(w,x=w_vals)) for w in steps]</span></span>
<span id="cb3-29"><a href="#cb3-29"></a>        <span class="co"># for each in steps:</span></span>
<span id="cb3-30"><a href="#cb3-30"></a>        <span class="co">#     result.append(np.sum(integrand(w_vals, each)))</span></span>
<span id="cb3-31"><a href="#cb3-31"></a>    <span class="cf">return</span> result</span>
<span id="cb3-32"><a href="#cb3-32"></a></span>
<span id="cb3-33"><a href="#cb3-33"></a>steps <span class="op">=</span> np.arange(<span class="fl">0.0</span>, <span class="fl">170.0</span>, <span class="dv">1</span>)</span>
<span id="cb3-34"><a href="#cb3-34"></a></span>
<span id="cb3-35"><a href="#cb3-35"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb3-36"><a href="#cb3-36"></a></span>
<span id="cb3-37"><a href="#cb3-37"></a>ax.plot(steps, lhs(steps), <span class="st">&#39;b-&#39;</span>)</span>
<span id="cb3-38"><a href="#cb3-38"></a>ax.plot(steps, rhs(steps, continuous <span class="op">=</span> <span class="va">True</span>), <span class="st">&#39;b-&#39;</span>)</span>
<span id="cb3-39"><a href="#cb3-39"></a>ax.plot(steps, rhs(steps, continuous <span class="op">=</span> <span class="va">False</span>), <span class="st">&#39;r-&#39;</span>) <span class="co">## discrete approximation</span></span>
<span id="cb3-40"><a href="#cb3-40"></a>ax.set_ylim(<span class="op">-</span><span class="dv">100</span>,<span class="dv">600</span>)</span>
<span id="cb3-41"><a href="#cb3-41"></a>ax.set_xlim(<span class="dv">0</span>,<span class="dv">140</span>)</span>
<span id="cb3-42"><a href="#cb3-42"></a><span class="co"># plt.show()</span></span>
<span id="cb3-43"><a href="#cb3-43"></a>ax.text(<span class="dv">80</span>, <span class="dv">90</span>, <span class="vs">r&#39;$\bar</span><span class="sc">{w}</span><span class="vs"> - b$&#39;</span>, fontsize <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb3-44"><a href="#cb3-44"></a>ax.text(<span class="dv">40</span>, <span class="dv">500</span>, <span class="op">\</span></span>
<span id="cb3-45"><a href="#cb3-45"></a>        <span class="vs">r&quot;$\frac{\beta}{1-\beta} \int_{\bar</span><span class="sc">{w}</span><span class="vs">}^</span><span class="sc">{B}</span><span class="vs">(w&#39; - \bar</span><span class="sc">{w}</span><span class="vs">)dF(w&#39;)$&quot;</span>, <span class="op">\</span></span>
<span id="cb3-46"><a href="#cb3-46"></a>        fontsize <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb3-47"><a href="#cb3-47"></a></span>
<span id="cb3-48"><a href="#cb3-48"></a>ax.axvline(x<span class="op">=</span><span class="fl">125.4</span>, ymin <span class="op">=</span> <span class="dv">0</span>, ymax <span class="op">=</span> <span class="dv">600</span>)</span>
<span id="cb3-49"><a href="#cb3-49"></a>ax.set_xlabel(<span class="st">&quot;wage&quot;</span>)</span>
<span id="cb3-50"><a href="#cb3-50"></a>ax.set_ylabel(<span class="st">&quot;left hand side | right hand side&quot;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="3">
<pre><code>&lt;matplotlib.text.Text at 0x7f7fe5d8cb10&gt;</code></pre>
</div>
<div class="output display_data">
<p><img src="aa6d531b9e1f4c8e51ac142fa93f0837d3fafa25.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>The reservation wage solved by the above method is 125.5.</p>
<p>We also notice that discrete sum is a good approximation for the integration, which proceeds slowly.</p>
<p>Now, how does the solution vary with respect to standard deviation of wage distribution?</p>
</div>
<div class="cell code" data-execution_count="4">
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>steps <span class="op">=</span> np.arange(<span class="fl">0.0</span>, <span class="fl">170.0</span>, <span class="dv">1</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="fl">6.5</span>))</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a>ax.plot(steps, lhs(steps), <span class="st">&#39;b-&#39;</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="cf">for</span> each <span class="kw">in</span> np.linspace(<span class="dv">10</span>,<span class="dv">30</span>,<span class="dv">5</span>):</span>
<span id="cb5-7"><a href="#cb5-7"></a>    ax.plot(steps, rhs(steps, continuous <span class="op">=</span> <span class="va">False</span>, std <span class="op">=</span> each), </span>
<span id="cb5-8"><a href="#cb5-8"></a>           label <span class="op">=</span> <span class="st">&quot;standard deviation: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(each)) <span class="co">## discrete approximation</span></span>
<span id="cb5-9"><a href="#cb5-9"></a></span>
<span id="cb5-10"><a href="#cb5-10"></a>ax.set_ylim(<span class="op">-</span><span class="dv">100</span>,<span class="dv">600</span>)</span>
<span id="cb5-11"><a href="#cb5-11"></a>ax.set_xlim(<span class="dv">0</span>,<span class="dv">170</span>)</span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co"># plt.show()</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>ax.legend(loc <span class="op">=</span> <span class="st">&#39;upper left&#39;</span>)</span>
<span id="cb5-14"><a href="#cb5-14"></a>ax.set_xlabel(<span class="st">&quot;wage&quot;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="4">
<pre><code>&lt;matplotlib.text.Text at 0x7f7fe5d94a50&gt;</code></pre>
</div>
<div class="output display_data">
<p><img src="d623c3c66b7f419cbb7cc53e098fb2a652922e51.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Comparative Statics:</p>
<ol>
<li>The equilibrium reservation wage <span class="math inline">\(\bar{w}\)</span> is increasing in the standard deviation of wage distribution. This result holds because our worker is risk neutral.</li>
<li>It is also evident that <span class="math inline">\(\bar{w}\)</span> decreases with <span class="math inline">\(b\)</span> and increases with <span class="math inline">\(\beta\)</span>.</li>
<li>In the following code, we study the shape of value function.</li>
</ol>
<p>In the following, we use iteration to solve the model as in the original lecture.As <span class="math inline">\(t\)</span> increases, the contraction mapping theorem leads the worker's strategy to converge her reservation strategy, at which point the value of our value function <span class="math inline">\(V\)</span> is optimal.</p>
<p>\begin{eqnarray<em>} V_{\sigma, t+1}(w) = max(\frac{w}{1-\beta}, b + \beta \int_{0}^{B}V_{\sigma, t}(w')dF(w')) \end{eqnarray</em>}</p>
</div>
<div class="cell code" data-execution_count="5">
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">class</span> ValueFunction(MccallModel):</span>
<span id="cb7-2"><a href="#cb7-2"></a>    <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co">    Inheritance</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">    &quot;&quot;&quot;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, b <span class="op">=</span> my_benefit,<span class="op">\</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>                 beta <span class="op">=</span> my_beta,<span class="op">\</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>                 wage_vals <span class="op">=</span> w_vals,<span class="op">\</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>                 wpdf_vals <span class="op">=</span> wpdf_vals):</span>
<span id="cb7-9"><a href="#cb7-9"></a>        MccallModel.<span class="fu">__init__</span>(<span class="va">self</span>)</span>
<span id="cb7-10"><a href="#cb7-10"></a>        </span>
<span id="cb7-11"><a href="#cb7-11"></a>        <span class="co"># initialization of v</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>        </span>
<span id="cb7-13"><a href="#cb7-13"></a>        <span class="va">self</span>.current <span class="op">=</span> <span class="va">self</span>.wVals <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> <span class="va">self</span>.beta)</span>
<span id="cb7-14"><a href="#cb7-14"></a>        <span class="va">self</span>.<span class="bu">next</span> <span class="op">=</span> np.empty_like(<span class="va">self</span>.current)</span>
<span id="cb7-15"><a href="#cb7-15"></a>        <span class="cf">return</span></span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a></span>
<span id="cb7-18"><a href="#cb7-18"></a>valueFunc <span class="op">=</span> ValueFunction()</span>
<span id="cb7-19"><a href="#cb7-19"></a></span>
<span id="cb7-20"><a href="#cb7-20"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="fl">8.5</span>))</span>
<span id="cb7-21"><a href="#cb7-21"></a></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb7-23"><a href="#cb7-23"></a>    ax.plot(w_vals, valueFunc.current,<span class="op">\</span></span>
<span id="cb7-24"><a href="#cb7-24"></a>            label<span class="op">=</span><span class="st">&quot;iterate </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(i))</span>
<span id="cb7-25"><a href="#cb7-25"></a></span>
<span id="cb7-26"><a href="#cb7-26"></a>    valueFunc.<span class="bu">next</span> <span class="op">=</span> <span class="op">\</span></span>
<span id="cb7-27"><a href="#cb7-27"></a>    <span class="bu">map</span>(<span class="kw">lambda</span> val: <span class="op">\</span></span>
<span id="cb7-28"><a href="#cb7-28"></a>        np.maximum(val, my_benefit <span class="op">+</span> <span class="op">\</span></span>
<span id="cb7-29"><a href="#cb7-29"></a>                   my_beta <span class="op">*</span> np.<span class="bu">sum</span>(np.multiply(valueFunc.current,valueFunc.wpdfVals))), <span class="op">\</span></span>
<span id="cb7-30"><a href="#cb7-30"></a>        w_vals<span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>my_beta))</span>
<span id="cb7-31"><a href="#cb7-31"></a>    </span>
<span id="cb7-32"><a href="#cb7-32"></a>    valueFunc.current[:] <span class="op">=</span> valueFunc.<span class="bu">next</span></span>
<span id="cb7-33"><a href="#cb7-33"></a>    </span>
<span id="cb7-34"><a href="#cb7-34"></a>    <span class="bu">print</span>(valueFunc.<span class="bu">next</span>[<span class="dv">30</span>])</span>
<span id="cb7-35"><a href="#cb7-35"></a></span>
<span id="cb7-36"><a href="#cb7-36"></a>ax.set_ylim(<span class="dv">9000</span>,<span class="dv">12500</span>)</span>
<span id="cb7-37"><a href="#cb7-37"></a>ax.set_xlim(<span class="dv">0</span>,<span class="dv">200</span>)</span>
<span id="cb7-38"><a href="#cb7-38"></a>ax.set_xlabel(<span class="st">&quot;Wage&quot;</span>)</span>
<span id="cb7-39"><a href="#cb7-39"></a>ax.set_ylabel(<span class="st">&quot;Value of value function&quot;</span>)</span>
<span id="cb7-40"><a href="#cb7-40"></a>ax.legend(loc<span class="op">=</span><span class="st">&#39;center right&#39;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>9880.495057814362
10609.039405556166
11002.654075744707
11257.101968395358
11435.813148475774
11567.890726454656
11668.481467944921
11746.836580716454
11808.857339215134
11858.620490352594
</code></pre>
</div>
<div class="output execute_result" data-execution_count="5">
<pre><code>&lt;matplotlib.legend.Legend at 0x7f7fe5ace210&gt;</code></pre>
</div>
<div class="output display_data">
<p><img src="8240022aa026bc3f73a5daffd041abdcf9d56669.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="6">
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">def</span> solve_model(b <span class="op">=</span> my_benefit, beta <span class="op">=</span> my_beta,<span class="op">\</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>                wage_vals <span class="op">=</span> w_vals,<span class="op">\</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>                wpdf_vals <span class="op">=</span> wpdf_vals,<span class="op">\</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>                num_iter<span class="op">=</span><span class="dv">1000</span>,tol<span class="op">=</span><span class="fl">1e-8</span>):</span>
<span id="cb10-5"><a href="#cb10-5"></a>    </span>
<span id="cb10-6"><a href="#cb10-6"></a>    valueFunc <span class="op">=</span> ValueFunction()</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a>    i, bias <span class="op">=</span> <span class="dv">0</span>, <span class="dv">100</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>    </span>
<span id="cb10-10"><a href="#cb10-10"></a>    <span class="cf">while</span> (i <span class="op">&lt;</span> num_iter <span class="kw">and</span> bias <span class="op">&gt;</span> tol):</span>
<span id="cb10-11"><a href="#cb10-11"></a>        </span>
<span id="cb10-12"><a href="#cb10-12"></a>        valueFunc.<span class="bu">next</span> <span class="op">=</span> <span class="op">\</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>        <span class="bu">map</span>(<span class="kw">lambda</span> val: <span class="op">\</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>            np.maximum(val, my_benefit <span class="op">+</span> my_beta <span class="op">*</span> np.<span class="bu">sum</span>(valueFunc.current <span class="op">*</span> wpdf_vals)), <span class="op">\</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>            w_vals<span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>my_beta))</span>
<span id="cb10-16"><a href="#cb10-16"></a>        </span>
<span id="cb10-17"><a href="#cb10-17"></a>        ref <span class="op">=</span> np.copy(valueFunc.current)</span>
<span id="cb10-18"><a href="#cb10-18"></a>        </span>
<span id="cb10-19"><a href="#cb10-19"></a>        valueFunc.current[:] <span class="op">=</span> valueFunc.<span class="bu">next</span></span>
<span id="cb10-20"><a href="#cb10-20"></a>        </span>
<span id="cb10-21"><a href="#cb10-21"></a>        bias <span class="op">=</span> np.<span class="bu">max</span>(np.<span class="bu">abs</span>(valueFunc.current <span class="op">-</span> ref))</span>
<span id="cb10-22"><a href="#cb10-22"></a>        </span>
<span id="cb10-23"><a href="#cb10-23"></a>        i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-24"><a href="#cb10-24"></a>    </span>
<span id="cb10-25"><a href="#cb10-25"></a>    reservation_wage <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> beta) <span class="op">*</span> <span class="op">\</span></span>
<span id="cb10-26"><a href="#cb10-26"></a>    (b <span class="op">+</span> beta <span class="op">*</span> np.<span class="bu">sum</span>(valueFunc.current <span class="op">*</span> valueFunc.wpdfVals))</span>
<span id="cb10-27"><a href="#cb10-27"></a></span>
<span id="cb10-28"><a href="#cb10-28"></a>    <span class="cf">return</span> valueFunc, reservation_wage</span>
<span id="cb10-29"><a href="#cb10-29"></a></span>
<span id="cb10-30"><a href="#cb10-30"></a></span>
<span id="cb10-31"><a href="#cb10-31"></a><span class="bu">print</span>(solve_model()[<span class="dv">1</span>])</span></code></pre></div>
<div class="output stream stdout">
<pre><code>120.88858591653833
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>The gap between the reservation wage solved from iteration and the reservation wage solved using equation <span class="math inline">\((4)\)</span> is because normal distribution is continuous, and we were using discrete approximation of the probability density to compute the value function.</p>
</div>
<div class="cell markdown">
<h3 id="references">References:</h3>
<ol>
<li><a href="https://lectures.quantecon.org/py/mccall_model.html" class="uri">https://lectures.quantecon.org/py/mccall_model.html</a></li>
<li>Mit Lecture on Labor Economics: <a href="https://economics.mit.edu/files/10284" class="uri">https://economics.mit.edu/files/10284</a></li>
</ol>
</div>
<div class="cell markdown">
<h4 id="variations-of-the-model">Variations of the model.</h4>
<ul>
<li>purchasing power, anticipation of inflation</li>
</ul>
<p>\begin{equation<em>} 1 + \frac{q^2}{(1-q)}+\frac{q^6}{(1-q)(1-q^2)}+\cdots = \prod_{j=0}^{\infty}\frac{1}{(1-q^{5j+2})(1-q^{5j+3})}, \quad\quad \text{for <span class="math inline">\(|q|&lt;1\)</span>}. \end{equation</em>}</p>
</div>
</body>
</html>
