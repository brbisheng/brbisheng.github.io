--- 
title: Recursive Closed Forms, a proof.
categories: Bayesian
comments: true 
---

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title>Recursive Closed Forms </title>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
        </script>
    </head>
    <body bgcolor="#ffffff">
        <style>H1 {text-align: Center; COLOR: Green} </style>
        <style>H2 {text-align: Center; COLOR: Red} </style>
        <style>H3 {text-align: Center; COLOR: Blue} </style>
        <h1 >Recursive Closed Forms  </h1>

<!-- ************************************ -->
<hr> <hr> <h2 > Recursion Tree - Intuition for  Master Method </h2> <hr> <hr> 
<!-- ************************************ -->


<!-- ************************************ -->
<br> 
<hr> 
<h3 align=center> Recursion Tree  </h3>
<ul>
    <li>  A Recursion Tree is a technique for calculating the amount of work expressed by a recurrence equation   </li>
    <ul>
        <li> Nice illustration of a recurrence </li>
        <li>  Gives intuition behind Master Methods </li>
    </ul>
    <br>
    <li>  Each level of the tree shows the <b>non-recursive work</b> for a given parameter
    value </li>
    <ul>
        <li> See diagram </li>
    </ul>
    <br>
    <li>  Write each node with two parts:  </li>
    <ul>
        <li> Upper part: $T(s)$ for some $s$ </li>
        <li>  Lower part: non-recursive part of $T(s)$    </li>
    </ul>
    <br>
    <li>  Relation between parts: Upper part = lower part + upper parts of children </li>

</ul>


<!-- ************************************ -->
<br> 
<hr> 
<h3 align=center>Example Recursion Tree </h3>
<ul>
    <li>  Consider $T(n) = 2T(\frac{n}{3}) + 5n$ </li>
    <ul>
        <li> $T(0) = 7$ </li>
        <li> These values don't represent a specific algorithm.  
        They are just chosen for illustration.  </li>
    </ul>

    <br>
    <li>  First rewrite as $T(s) = 5s + 2T(\frac{s}{3})$  </li>
    <ul>
        <li> Putting non-recursive term first is (slightly) easier</li>
        <li>  Using a different variable allows us to focus on calculating $T(n)$ </li>
    </ul>
    <br>
    <li>  Now calculate $T(27) = T(3^3)$: </li>
    <ul>
        <li>  Root is $T(27)$: </li>
        <ul>
            <li> Upper part: $T(27)$ </li>
            <li>  Lower part: $5s=5\times 27 = 135$ </li>
        </ul>
        <br>
        <li>  Children of root: </li>
        <ul>
            <li> How many children? </li>
            <li> What's in each child?  </li>
        </ul>
        <br> 
        <li>  Calculating $T(27)$: </li>

        $\begin{align*}
        T(27) & = 5\times 27 + 2 \times T(27/3)   \\
              & = 135 + 2 \times T(27/3)   \\
              & = 135 + 2 \times [45 + 2 \times T(9/3)]   \\
              & = 135 + 2 \times [45 + 2 \times [15 + 2 \times T(3/3)]]   \\
              & = 135 + 2 \times [45 + 2 \times [15 + 2 \times 7]]   \\
              & = 135 + 2 \times [45 + 2 \times 29]   \\
              & = 135 + 2 \times 103   \\
              & = 135 + 206   \\
              & = 341
        \end{align*}
        $
    </ul>

</ul>


<!-- ************************************ -->
<br> 
<hr> 
<h3 align=center>Example Recursion Tree </h3>
<ul>
    <li>  Consider $T(s) = 2T(\frac{s}{3}) + 5s = 5s + 2T(\frac{s}{3}) $ </li>
    <li>  Calculate $T(27)$  </li>

<center>
              <img src="Diagrams/Recurrence1.gif"></img> 
</center>
<li>  Where do 2, 3, log<sub>3</sub>, log<sub>3</sub> 27 come from?  </li>
</ul>


<!-- ************************************ -->
<br> 
<hr> 
<h3 align=center>Tree Properties</h3>
<ul>
    <li>  Consider $T(s) = 5s + 2T(\frac{s}{3}) $ </li>
    <br> 
    <li>  Bottom level is level $\log_3 27$ = level 3 </li>
    <li>  Number of levels: $ 1 + \log_3 27  = 1 + 3 = 4$ </li>
    <br> 
    <li>  Sum of level 0: $2^0 \times (5\times 27) = 135$ </li>
    <li>  Sum of level 1: $2^1 \times (5\times 9) = 90$ </li>
    <li>  Sum of level 2: $2^2 \times (5\times 3) = 60$ </li>
    <br> 
    <li>  Sum of bottom level: $2^{\log_3 27} * 7 = 2^3 \times 7 = 56$ </li>
    <br> 
    <li>  Sum of all levels: $135 + 90 + 60 + 56 = 341$ </li>
</ul>


<!-- ************************************ -->
<br> 
<hr> 
<h3 align=center>Recursion Tree for $T(n) = aT(\frac{n}{b}) + f(n)$ </h3>
<ul>
    <li> Recurrence Equation: $T(s) = f(s) + a T(s/b)$  </li>
    <ul>
        <li> $T(1) = d$ </li>
    </ul>
    <li>  Find $T(n)$ </li>

<center>
              <img src="Diagrams/Recurrence2.gif"></img> 
</center>
</ul>


<!-- ************************************ -->
<br> 
<hr> 
<h3 align=center>Summing the Values in the Tree </h3>
<ul>
    <li> Recurrence Equation: $T(s) = f(s) + a T(s/b)$  </li>
    <ul>
        <li> $f(0) = d$ </li>
    </ul>
    <br> 
    <li>  Bottom level is level $\log_b n$  </li>
    <li>  Number of levels: $ 1 + \log_b n$    </li>
    <br> 
    <li>  Sum of all levels except leaves: cost of dividing and joining </li>
    <ul>
    <li>  Sum of level 0: $a^0 \times f(\frac{n}{b^0}) $ </li>
    <li>  Sum of level 1: $a^1 \times f(\frac{n}{b^1}) $ </li>
    <li>  Sum of level 2: $a^2 \times f(\frac{n}{b^2}) $ </li>
    <br> 
    <li>  Sum of level i: $a^i \times f(\frac{n}{b^i}) $ </li>
    <br> 
    <li>  Sum of all levels except leaves: $\sum_{i=0}^{\log_b n - 1} a^i f(\frac{n}{b^i})$</li>
    </ul>
    <br> 
    <li>  Sum of bottom level: cost of solving all problems of size 1 </li>
    <ul>
        <li>  $d a^{log_b n} = d n^{log_b a}  $ </li>
    </ul>

    <br> 
    <li>  Sum of all levels:  </li>
    $$
    \sum_{i=0}^{\log_b n - 1} a^i f(\frac{n}{b^i}) + d n^{log_b a} 
    $$ 
</ul>


<!-- ************************************ -->
<br> 
<hr> 
<h3 align=center>Fine Points  </h3>
<ul>
    <li>  $a &ge; 1, b &gt; 1, \text{ are constants}$ </li>
    <br> 
    <li>  If $n$ is not a power of $b$, then replace $n/b$ by $\lfloor n/b \rfloor$ (or
    $\lceil n/b \rceil$) </li>
    <ul>
        <li> It can be proved that this does not affect the complexity </li>
    </ul>
</ul>


<!-- ************************************ -->
<br> 
<hr> 
<h3 align=center>Evaluating the Complexity of the Sum of the Tree Levels </h3>
<ul>
    <li>  Sum of all levels:
    $\displaystyle  \sum_{i=0}^{\log_b n - 1} a^i  f(\frac{n}{b^i}) + \Theta(n^{log_b a}) 
    $ 
    </li>
    <br> 
    <li>  Simplify base case of recursion using $\Theta(1)$ instead of $d$ </li>
    <br> 
    <li>  When this formula is a polynomial in $n$, we can simplify it by 
    considering  the power of $n$ in each term: </li>
    <ul>
        <li>  Either first or second term can dominate or they can be the same order </li>
    </ul>
    <br>
    <li>  Intuitively: </li>
    <ul>
        <li>  $\Theta(f(n))$, if the first term (ie the sum of non-leaf levels) dominates (Case 1)</li>
        <li>  $\Theta(n^{log_b a}\lg n )$, if neither term dominates </li>
        <li>  $\Theta(n^{log_b a})$, if the second term (ie sum of leaves) dominates (Case 3) </li>
        <li>  Some restrictions occur </li>
    </ul>
    <br>
    <li>  These results can be formalized to obtain the General Master Method </li>
</ul>




<hr> 
<hr> 
<br> <br> <br> <br> <br> <br>
<br> <br> <br> <br> <br> <br> 
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({ 
       tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']]}
    });
</script>
<script type="text/javascript" 
    src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'>
</script>

    </body>
</html> 
